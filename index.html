<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ownly - Digital Sovereignty Made Simple</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <span class="badge">Early Access</span>

        <!-- HERO SECTION -->
        <h1>Stop Renting Your Digital Life.<br>Own It.</h1>
        <p class="subtitle">Run your own private cloud, password manager, or website without writing a single line of code. We manage the server; you click "Install."</p>

        <!-- HERO WAITLIST CARD -->
        <div class="waitlist-card">
            <h3 class="card-title">Join the waitlist</h3>
            <p class="card-subtitle">Be the first to know when we launch and get 3 months free.</p>
            <form id="hero-form" class="waitlist-form">
                <div class="form-group">
                    <input
                        type="email"
                        id="hero-email"
                        name="email"
                        placeholder="name@example.com"
                        required
                        autocomplete="email"
                    >
                    <button type="submit" class="btn-primary">Request Access</button>
                </div>
                <div id="hero-message" class="message" aria-live="polite"></div>
            </form>
            <p class="disclaimer">No spam. Unsubscribe anytime.</p>
        </div>

        <hr class="divider">

        <!-- PROBLEM SECTION -->
        <h2>Tired of Big Tech Controlling Your Data?</h2>

        <div class="callout problem-callout">
            <div class="icon">âœ—</div>
            <div class="callout-content">
                <p>Your personal information sold to advertisers</p>
            </div>
        </div>

        <div class="callout problem-callout">
            <div class="icon">âœ—</div>
            <div class="callout-content">
                <p>Privacy policies that change without notice</p>
            </div>
        </div>

        <div class="callout problem-callout">
            <div class="icon">âœ—</div>
            <div class="callout-content">
                <p>Data scattered across dozens of platforms</p>
            </div>
        </div>

        <hr class="divider">

        <!-- SOLUTION / BENEFITS SECTION -->
        <h2>Why Ownly?</h2>

        <div class="callout">
            <div class="icon">ðŸ”’</div>
            <div class="callout-content">
                <h3>Total Privacy</h3>
                <p>Your data stays on your server. We can't see your photos, files, or passwords.</p>
            </div>
        </div>

        <div class="callout">
            <div class="icon">âš¡</div>
            <div class="callout-content">
                <h3>One-Click Install</h3>
                <p>Install Nextcloud, Bitwarden, or Ghost instantly. No Docker or Linux knowledge needed.</p>
            </div>
        </div>

        <div class="callout">
            <div class="icon">ðŸ’°</div>
            <div class="callout-content">
                <h3>Flat Pricing</h3>
                <p>Run 10+ apps on one server for a single monthly fee. Stop paying per-user SaaS costs.</p>
            </div>
        </div>

        <hr class="divider">

        <!-- HOW IT WORKS -->
        <h2>How It Works</h2>

        <div class="step-item">
            <div class="step-number">1</div>
            <div class="step-content">
                <h3>Sign Up</h3>
                <p>Create your account in seconds</p>
            </div>
        </div>

        <div class="step-item">
            <div class="step-number">2</div>
            <div class="step-content">
                <h3>Choose Your Apps</h3>
                <p>One-click install your favorite privacy-focused apps</p>
            </div>
        </div>

        <div class="step-item">
            <div class="step-number">3</div>
            <div class="step-content">
                <h3>Take Control</h3>
                <p>Enjoy true ownership of your digital life</p>
            </div>
        </div>

        <hr class="divider">

        <!-- FINAL CTA -->
        <h2>Ready to Own Your Data?</h2>
        <p class="subtitle" style="margin-bottom: 2rem;">Join thousands who are taking back control.</p>

        <div class="waitlist-card">
            <h3 class="card-title">Get Early Access</h3>
            <p class="card-subtitle">No credit card required â€¢ Cancel anytime</p>
            <form id="footer-form" class="waitlist-form">
                <div class="form-group">
                    <input
                        type="email"
                        id="footer-email"
                        name="email"
                        placeholder="name@example.com"
                        required
                        autocomplete="email"
                    >
                    <button type="submit" class="btn-primary">Request Access</button>
                </div>
                <div id="footer-message" class="message" aria-live="polite"></div>
            </form>
        </div>

        <footer>
            <span>Â© 2026 Ownly <span style="opacity:0.5">v2.1</span></span>
            <span>Made for digital sovereignty</span>
        </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
    var supabase = window.supabase.createClient(
        'https://ldabzqoxgogwxixicpml.supabase.co',
        'sb_publishable_262uXsz-j2gr1HZA_1ukSA_m2Z1_Q39'
    );

    function handleFormSubmit(formId, emailId, messageId) {
        document.getElementById(formId).addEventListener('submit', async function(e) {
            e.preventDefault();
            var email = document.getElementById(emailId).value.trim().toLowerCase();
            var btn = e.target.querySelector('button[type="submit"]');
            var msg = document.getElementById(messageId);

            if (!email) { msg.textContent = 'Please enter your email'; msg.className = 'message error show'; return; }

            // Validate email format
            var emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
            if (!emailRegex.test(email)) {
                // Find invalid characters
                var validChars = /[a-zA-Z0-9._%+-@-]/g;
                var invalidChars = email.replace(validChars, '').split('').filter(function(v, i, a) { return a.indexOf(v) === i; });
                if (invalidChars.length > 0) {
                    msg.textContent = 'Invalid character(s): ' + invalidChars.join(', ');
                } else {
                    msg.textContent = 'Please enter a valid email address';
                }
                msg.className = 'message error show';
                return;
            }

            var originalText = btn.textContent;
            btn.disabled = true;
            btn.textContent = 'Joining...';

            try {
                var result = await supabase.from('waitlist').insert([{ email: email }]);
                if (result.error) {
                    // Handle duplicate email error
                    if (result.error.code === '23505' || result.error.message.includes('duplicate key')) {
                        msg.textContent = 'This email is already on the waitlist!';
                    } else {
                        msg.textContent = 'Something went wrong. Please try again.';
                    }
                    msg.className = 'message error show';
                } else {
                    window.location.href = 'thanks.html';
                }
            } catch(err) {
                msg.textContent = 'Something went wrong. Please try again.';
                msg.className = 'message error show';
            }
            btn.disabled = false;
            btn.textContent = originalText;
        });
    }

    // Attach handlers to both forms
    handleFormSubmit('hero-form', 'hero-email', 'hero-message');
    handleFormSubmit('footer-form', 'footer-email', 'footer-message');
    </script>
</body>
</html>
