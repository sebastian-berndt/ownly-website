<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ownly - Coming Soon</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <main class="container">
        <header class="hero">
            <h1 class="logo">Ownly</h1>
            <p class="tagline">Coming Soon</p>
            <p class="description">Something exciting is on the way. Be the first to know when we launch.</p>
        </header>

        <form id="waitlist-form" class="waitlist-form">
            <div class="input-group">
                <input
                    type="email"
                    id="email"
                    name="email"
                    placeholder="Enter your email"
                    required
                    autocomplete="email"
                >
                <button type="submit" id="submit-btn">Join Waitlist</button>
            </div>
            <div id="message" class="message" aria-live="polite"></div>
            <div id="debug" style="margin-top:1rem;padding:0.5rem;background:#fee;color:#900;font-size:0.75rem;text-align:left;">Loading...</div>
            <script>
var d = document.getElementById('debug');
d.innerHTML = '1.Inline OK<br>';
</script>
        </form>

        <footer class="footer">
            <p>&copy; 2026 Ownly. All rights reserved. <span style="opacity:0.5">v1.11</span></p>
        </footer>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2" onload="d.innerHTML+='2.Supabase CDN OK<br>'" onerror="d.innerHTML+='2.Supabase CDN FAILED<br>'"></script>
    <script>
    d.innerHTML += '3.Starting init<br>';
    try {
        var supabase = window.supabase.createClient(
            'https://ldabzqoxgogwxixicpml.supabase.co',
            'sb_publishable_262uXsz-j2gr1HZA_1ukSA_m2Z1_Q39'
        );
        d.innerHTML += '4.Supabase OK<br>';
    } catch(e) {
        d.innerHTML += '4.Error: ' + e.message + '<br>';
    }

    document.getElementById('waitlist-form').addEventListener('submit', async function(e) {
        e.preventDefault();
        var email = document.getElementById('email').value.trim().toLowerCase();
        var btn = document.getElementById('submit-btn');
        var msg = document.getElementById('message');

        if (!email) { msg.textContent = 'Enter email'; msg.className = 'message error show'; return; }

        btn.disabled = true;
        btn.textContent = 'Joining...';
        d.innerHTML += '5.Submitting: ' + email + '<br>';

        try {
            var result = await supabase.from('waitlist').insert([{ email: email }]);
            d.innerHTML += '6.Result: ' + JSON.stringify(result) + '<br>';
            if (result.error) {
                msg.textContent = result.error.message;
                msg.className = 'message error show';
            } else {
                window.location.href = 'thanks.html';
            }
        } catch(err) {
            d.innerHTML += '6.Catch: ' + err.message + '<br>';
            msg.textContent = err.message;
            msg.className = 'message error show';
        }
        btn.disabled = false;
        btn.textContent = 'Join Waitlist';
    });
    </script>
</body>
</html>
