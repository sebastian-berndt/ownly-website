<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ownly - Digital Sovereignty Made Simple</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- HERO SECTION -->
    <section class="hero">
        <div class="container">
            <div class="badge">Early Access</div>
            <h1 class="hero-title">Stop Renting Your Digital Life.<br>Own It.</h1>
            <p class="hero-subtitle">Run your own private cloud, password manager, or website without writing a single line of code. We manage the server; you click "Install."</p>

            <form id="hero-form" class="cta-form">
                <div class="form-group">
                    <input
                        type="email"
                        id="hero-email"
                        name="email"
                        placeholder="name@example.com"
                        required
                        autocomplete="email"
                    >
                    <button type="submit" class="btn-cta">Request Access</button>
                </div>
                <div id="hero-message" class="message" aria-live="polite"></div>
            </form>
            <p class="hero-note">Join thousands taking back control â€¢ No credit card required</p>
        </div>
    </section>

    <!-- PROBLEM SECTION -->
    <section class="section section-light">
        <div class="container">
            <h2 class="section-title">Tired of Big Tech Controlling Your Data?</h2>
            <div class="problems-grid">
                <div class="problem-card">
                    <div class="problem-icon">âœ—</div>
                    <p>Your personal information sold to advertisers</p>
                </div>
                <div class="problem-card">
                    <div class="problem-icon">âœ—</div>
                    <p>Privacy policies that change without notice</p>
                </div>
                <div class="problem-card">
                    <div class="problem-icon">âœ—</div>
                    <p>Data scattered across dozens of platforms</p>
                </div>
            </div>
        </div>
    </section>

    <!-- SOLUTION SECTION -->
    <section class="section section-dark">
        <div class="container">
            <h2 class="section-title">Why Ownly?</h2>
            <p class="section-intro">Take back control with one simple platform</p>

            <div class="benefits-grid">
                <div class="benefit-card">
                    <div class="benefit-icon">ðŸ”’</div>
                    <h3>Total Privacy</h3>
                    <p>Your data stays on your server. We can't see your photos, files, or passwords.</p>
                </div>
                <div class="benefit-card">
                    <div class="benefit-icon">âš¡</div>
                    <h3>One-Click Install</h3>
                    <p>Install Nextcloud, Bitwarden, or Ghost instantly. No Docker or Linux knowledge needed.</p>
                </div>
                <div class="benefit-card">
                    <div class="benefit-icon">ðŸ’°</div>
                    <h3>Flat Pricing</h3>
                    <p>Run 10+ apps on one server for a single monthly fee. Stop paying per-user SaaS costs.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- HOW IT WORKS SECTION -->
    <section class="section section-light">
        <div class="container">
            <h2 class="section-title">How It Works</h2>
            <div class="steps-container">
                <div class="step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h3>Sign Up</h3>
                        <p>Create your account in seconds</p>
                    </div>
                    <div class="step-video">
                        <video src="videos/step-1.webm" autoplay loop muted playsinline>
                            <div class="video-placeholder">Video coming soon</div>
                        </video>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h3>Choose Your Apps</h3>
                        <p>One-click install your favorite privacy-focused apps</p>
                    </div>
                    <div class="step-video">
                        <video src="videos/step-2.webm" autoplay loop muted playsinline>
                            <div class="video-placeholder">Video coming soon</div>
                        </video>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h3>Take Control</h3>
                        <p>Enjoy true ownership of your digital life</p>
                    </div>
                    <div class="step-video">
                        <video src="videos/step-3.webm" autoplay loop muted playsinline>
                            <div class="video-placeholder">Video coming soon</div>
                        </video>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- FINAL CTA SECTION -->
    <section class="section section-cta">
        <div class="container">
            <h2 class="section-title">Ready to Own Your Data?</h2>
            <p class="section-intro">Be the first to know when we launch and get 3 months free</p>

            <form id="footer-form" class="cta-form">
                <div class="form-group">
                    <input
                        type="email"
                        id="footer-email"
                        name="email"
                        placeholder="name@example.com"
                        required
                        autocomplete="email"
                    >
                    <button type="submit" class="btn-cta">Request Access</button>
                </div>
                <div id="footer-message" class="message" aria-live="polite"></div>
            </form>
            <p class="hero-note">No spam. Unsubscribe anytime.</p>
        </div>
    </section>

    <!-- FOOTER -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <span>Â© 2026 Ownly <span class="version">v2.3</span></span>
                <span>Made for digital sovereignty</span>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
    var supabase = window.supabase.createClient(
        'https://ldabzqoxgogwxixicpml.supabase.co',
        'sb_publishable_262uXsz-j2gr1HZA_1ukSA_m2Z1_Q39'
    );

    function handleFormSubmit(formId, emailId, messageId) {
        document.getElementById(formId).addEventListener('submit', async function(e) {
            e.preventDefault();
            var email = document.getElementById(emailId).value.trim().toLowerCase();
            var btn = e.target.querySelector('button[type="submit"]');
            var msg = document.getElementById(messageId);

            if (!email) { msg.textContent = 'Please enter your email'; msg.className = 'message error show'; return; }

            // Validate email format
            var emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
            if (!emailRegex.test(email)) {
                // Find invalid characters
                var validChars = /[a-zA-Z0-9._%+-@-]/g;
                var invalidChars = email.replace(validChars, '').split('').filter(function(v, i, a) { return a.indexOf(v) === i; });
                if (invalidChars.length > 0) {
                    msg.textContent = 'Invalid character(s): ' + invalidChars.join(', ');
                } else {
                    msg.textContent = 'Please enter a valid email address';
                }
                msg.className = 'message error show';
                return;
            }

            var originalText = btn.textContent;
            btn.disabled = true;
            btn.textContent = 'Joining...';

            try {
                var result = await supabase.from('waitlist').insert([{ email: email }]);
                if (result.error) {
                    // Handle duplicate email error
                    if (result.error.code === '23505' || result.error.message.includes('duplicate key')) {
                        msg.textContent = 'This email is already on the waitlist!';
                    } else {
                        msg.textContent = 'Something went wrong. Please try again.';
                    }
                    msg.className = 'message error show';
                } else {
                    window.location.href = 'thanks.html';
                }
            } catch(err) {
                msg.textContent = 'Something went wrong. Please try again.';
                msg.className = 'message error show';
            }
            btn.disabled = false;
            btn.textContent = originalText;
        });
    }

    // Attach handlers to both forms
    handleFormSubmit('hero-form', 'hero-email', 'hero-message');
    handleFormSubmit('footer-form', 'footer-email', 'footer-message');
    </script>
</body>
</html>
